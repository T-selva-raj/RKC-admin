@if(isSearch||isFilter){
<div class="flex justify-content-between align-items-center mb-4 w-full flex-wrap gap-3">
    @if(isSearch){
    <span class="w-full sm:w-30rem">
        <p-floatlabel>
            <input type="text" pInputText [(ngModel)]="searchTerm" (input)="onSearch.emit(searchTerm)" id="search" />
            <label for="search">{{searchPlaceholder}}</label>
        </p-floatlabel>

    </span>
    }
    @if(isFilter){
    <p-dropdown [options]="filterOptions" [(ngModel)]="selectedFilter" optionLabel="label" placeholder="Filter by"
        (onChange)="onFilterChangeHandler(selectedFilter)" class="w-full sm:w-15rem"></p-dropdown>
    }
</div>
}


<p-table [value]="data" responsiveLayout="scroll" styleClass="w-full" [(selection)]="selectedRows" dataKey="id"
    selectionMode="multiple" (selectionChange)="onSelectionChange()">
    <ng-template pTemplate="header">
        <tr>
            @if(select){
            <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
            </th>
            }
            @for (col of columns; track $index) {
            <th class="text-center">{{ col.header }}</th>
            }
            @if (actions.length > 0) {
            <th class="text-center">Actions</th>
            }
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-row>

        <tr>
            @if(select){
            <td>
                <p-tableCheckbox [value]="row"></p-tableCheckbox>
            </td>
            }
            @for (col of columns; track $index) {

            @if(col?.type === 'date' && col?.format?.length) {
            <td class="text-center">{{ row[col.field] | date:(col.format || 'dd MMM yyyy') }}</td>
            }
            @else if(col?.type=='tag'){
            <div class="flex justify-content-center align-items-center">
                <p-tag [value]=" row[col.field]"
                    [styleClass]="'chip ' + (col.tagOptions?.[row[col.field]] || 'bg-cyan-400')" />
            </div>
            }
            @else {
            <td [class]="'text-center ' + (col.textColors?.[row[col.field]]||'')">{{ row[col.field] }}
            </td>
            }
            }
            @if (actions.length > 0) {
            <td>
                <div class="flex justify-content-center align-items-center" style="flex-wrap: nowrap;">
                    @if (actions.includes('view')) {
                    <p-button icon="pi pi-eye" size="small" severity="info" rounded
                        (click)="onView.emit(row)"></p-button>
                    &nbsp;&nbsp;
                    }
                    @if (actions.includes('edit')) {
                    <p-button icon="pi pi-pencil" size="small" severity="success" rounded
                        (click)="onEdit.emit(row)"></p-button>
                    &nbsp;&nbsp;
                    }
                    @if (actions.includes('delete')) {
                    <p-button icon="pi pi-trash" severity="danger" size="small" rounded
                        (click)="onDelete.emit(row)"></p-button>
                    &nbsp;&nbsp;
                    }
                    @if(actions.includes('download')){
                    <p-button icon="pi pi-download" severity="warn" size="small" rounded
                        (click)="onDownload.emit(row)"></p-button>
                    &nbsp;&nbsp;
                    }
                </div>
            </td>
            }
        </tr>
    </ng-template>
</p-table>
@if(isPaginator){<p-paginator [rows]="page" [totalRecords]="data.length" (onPageChange)="onPaginate($event)"
    appendTo="body" [rowsPerPageOptions]="pagenatorOptions"></p-paginator>}